---
title: TypeSpecã§OpenAPIã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰æ¯ã«descriptionã‚’è¨­å®šã™ã‚‹
published_at: 2025-11-28T00:00:00.000Z
tag: TypeSpec
---

# inline-override-docã‚’å®Ÿè£…ã™ã‚‹

packages/compiler/src/core/parser.ts

ã«ãƒ‘ãƒ¼ã‚µãƒ¼ã®å®Ÿè£…ãŒã‚ã‚‹
ã“ã®æ™‚ç‚¹ã§ã¯æ™®é€šã«ã‚³ãƒ¡ãƒ³ãƒˆãŒãƒ‘ãƒ¼ã‚¹ã•ã‚Œã‚‹

ğŸ‘º > comment /**
       * ğŸ‹
       */ { kind: 50, pos: 321, end: 346 }

ãŸã ã—ã€ãƒ¢ãƒ‡ãƒ«ã«ç´ã¥ã„ã¦ã„ã‚‹ã‹ã©ã†ã‹ã¯ãã®è¨˜è¿°æ¬¡ç¬¬ã§ã€
é™çš„ã«å®£è¨€ã•ã‚ŒãŸãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚Œã°docCommentãŒModelStatementã®ãƒãƒ¼ãƒ‰ï¼ˆdocsï¼‰ã«ç´ã¥ã„ã¦ã„ã‚‹

parseAnnotationsã§docCommentã¨ã—ã¦ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ã‹ã©ã†ã‹ã€parseDocListã®
` mutate(range.comment).parsedAsDocs = true;`ãŒå®Ÿè¡Œã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚‹ãŒã€
ç¾çŠ¶Operation statementã§ã¯ã“ã®æ“ä½œãŒå®Ÿè¡Œã•ã‚Œãªã„ãŸã‚ã€ãƒãƒ¼ãƒ‰ï¼ˆdocsï¼‰ã¨ç´ã¥ã„ã¦ã„ãªã„

```tsp
op foo(): /** One-liner */
{ bar: string };
```
ã®ã‚ˆã†ãªæ§‹æ–‡ã‚’è§£æã™ã‚‹éš›ã€ã¾ãšã¯`:`ç›´å¾Œã®BlockCommentã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦docsã«ç´ä»˜ã‘ã‚‹

skipParsingDocNodesã¨invalidAnnotationTargetã«ã¤ã„ã¦
ä¾‹ãˆã°Operationã®å¼•æ•°ãŒè¤‡æ•°ã§ã‚ã‚‹å ´åˆãªã©ãŒparseListã®å¯¾è±¡ã¨ãªã‚‹ã¨ãã€
ç‰¹å®šã®Expressionãªã©ã¯docCommentã‚’docsã¨ã—ã¦ãƒ‘ãƒ¼ã‚¹ã—ãªã„ã‚ˆã†ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹

```ts
  const ExpresionsBase = {
    allowEmpty: true,
    delimiter: Token.Comma,
    toleratedDelimiter: Token.Semicolon,
    toleratedDelimiterIsValid: false,
    invalidAnnotationTarget: "expression",
    allowedStatementKeyword: Token.None,
  } as const;
```

ã“ã®ã‚ˆã†ãªå®šç¾©ã‚’ã™ã‚‹å ´åˆã€ç¾çŠ¶ã¯ã“ã†ãªã‚‹ã€‚

```tsp
import "@typespec/http";

using Http;

/** This is Second */
model Second { baz: string };
union MyResponse {
ã€€/** First-union */
ã€€{ @statusCode code: 201; bar: string };
ã€€/** Second-union */
ã€€Second;
};
op foo():
/** Override Response union */
MyResponse |
/** Override third-union */
{ @statusCode code: 408; qux: string };
```

```yaml
openapi: 3.0.0
info:
  title: (title)
  version: 0.0.0
tags: []
paths:
  /:
    get:
      operationId: foo
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MyResponse'
        '408':
          description: Client error
          content:
            application/json:
              schema:
                type: object
                properties:
                  qux:
                    type: string
                required:
                  - qux
components:
  schemas:
    MyResponse:
      anyOf:
        - type: object
          properties:
            bar:
              type: string
          required:
            - bar
        - $ref: '#/components/schemas/Second'
    Second:
      type: object
      required:
        - baz
      properties:
        baz:
          type: string
      description: This is Second
```


https://typespec.io/playground/?e=%40typespec%2Fopenapi3&c=aW1wb3J0ICJAdHlwZXNwZWMvaHR0cCI7Cgp1c2luZyBIdHRwOwoKbW9kZWwgU2Vjb25kIHsgYmF6OiBzdHLEIn07CnVuaW9uIE15UmVzcG9uc2UgeyAvKiogRmlyc3Qtxh0qLyB7IEBzdGF0dXNDb2RlIGNvZGU6IDIwMTsgYmFyy07FO8ZqyjzGEDvEbW9wIGZvbygpOsUpT3ZlcnJpZGUgyXzJNOsAkHzOLHRoaXLLXfQAmTQwODsgcXV46wCZ&options=%7B%7D&vs=%7B%7D


packages/compiler/src/core/checker.ts

ã“ã“ã§ã‚³ãƒ¡ãƒ³ãƒˆã‚’ãƒãƒ¼ãƒ‰ã«ç´ã¥ã‘ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼Ÿ

å®Ÿç¾ã—ãŸã„ã®ã¯ã€ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ä¸Šã§ã¯æˆ»ã‚Šå€¤ã¨ãªã‚‹ã®ã§returnTypeã€‚
ã•ã‚‰ã«ã€returnTypeã¯Unionã‚„modelã§ã‚ã‚‹å ´åˆãŒã‚ã‚‹ã®ã§ã€
ãã“ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’ç´ã¥ã‘ã‚‹ï¼Ÿ

ãã‚‚ãã‚‚ã¯modelã«å¯¾ã—ã¦descriptionã‚’

packages/openapi3/src/openapi.ts

ã«OpenAPI3ã®Emitterå®Ÿè£…ãŒã‚ã‚‹